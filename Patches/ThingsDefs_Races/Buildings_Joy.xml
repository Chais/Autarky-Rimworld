<?xml version="1.0" encoding="utf-8" ?>
<Patch>
	<!-- Flatscreen TV -->
	<!-- Only add researchPrerequisite if list already exists -->
	<Operation Class="PatchOperationSequence">
		<success>Never</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/ThingDefs/ThingDef[defName="FlatscreenTelevision"]/researchPrerequisites</xpath>
				<success>Invert</success>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/ThingDefs/ThingDef[defName="FlatscreenTelevision"]/researchPrerequisites</xpath>
				<value>
					<li>Autarky_FlatscreenTelevision</li>
				</value>
			</li>
		</operations>
	</Operation>

	<!-- Or add list -->
	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/ThingDefs/ThingDef[defName="FlatscreenTelevision"]/researchPrerequisites</xpath>
				<success>Invert</success>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/ThingDefs/ThingDef[defName="FlatscreenTelevision"]</xpath>
				<value>
					<researchPrerequisites>
						<li>Autarky_FlatscreenTelevision</li>
					</researchPrerequisites>
				</value>
			</li>
		</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/ThingDefs/ThingDef[defName="FlatscreenTelevision"]/designationCategory</xpath>
				<success>Invert</success>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/ThingDefs/ThingDef[defName="FlatscreenTelevision"]</xpath>
				<value>
					<designationCategory>Joy</designationCategory>
				</value>
			</li>
		</operations>
	</Operation>

	<!-- Megascreen TV -->
	<!-- Only add researchPrerequisite if list already exists -->
	<Operation Class="PatchOperationSequence">
		<success>Never</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/ThingDefs/ThingDef[defName="MegascreenTelevision"]/researchPrerequisites</xpath>
				<success>Invert</success>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/ThingDefs/ThingDef[defName="MegascreenTelevision"]/researchPrerequisites</xpath>
				<value>
					<li>Autarky_MegascreenTelevision</li>
				</value>
			</li>
		</operations>
	</Operation>

	<!-- Or add list -->
	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/ThingDefs/ThingDef[defName="MegascreenTelevision"]/researchPrerequisites</xpath>
				<success>Invert</success>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/ThingDefs/ThingDef[defName="MegascreenTelevision"]</xpath>
				<value>
					<researchPrerequisites>
						<li>Autarky_MegascreenTelevision</li>
					</researchPrerequisites>
				</value>
			</li>
		</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/ThingDefs/ThingDef[defName="MegascreenTelevision"]/designationCategory</xpath>
				<success>Invert</success>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/ThingDefs/ThingDef[defName="MegascreenTelevision"]</xpath>
				<value>
					<designationCategory>Joy</designationCategory>
				</value>
			</li>
		</operations>
	</Operation>

	<!-- Telescope -->
	<Operation Class="PatchOperationSequence">
		<success>Never</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/ThingDefs/ThingDef[defName="Telescope"]/costList</xpath>
				<success>Invert</success>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/ThingDefs/ThingDef[defName="Telescope"]</xpath>
				<value>
					<costList>
						<Steel>80</Steel>
						<Component>10</Component>
					</costList>
					<designationCategory>Joy</designationCategory>
					<researchPrerequisites>
						<li>Autarky_Telescope</li>
					</researchPrerequisites>
				</value>
			</li>
		</operations>
	</Operation>
</Patch>
